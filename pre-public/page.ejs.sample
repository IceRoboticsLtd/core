<!DOCTYPE html>
<html manifest="" lang="en-GB">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
        <title><%= title %></title>
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="author" content="humans.txt" />
        <meta http-equiv="Access-Control-Allow-Origin" content="*" /><!-- TO DO: change the * for a restricted set of domains -->
        <meta http-equiv="Access-Control-Allow-Methods" content="GET, POST, PUT" />
        <link rel="shortcut icon" type"image/x-icon" href="favicon.png" />
        <link rel="shortcut icon" type"image/png" href="favicon.png" />
        <!--[if IE]>
            <link rel="shortcut icon" href="favicon.ico" />
        <![endif]-->
        <script >
        // See http://www.ejeliot.com/blog/109
            function loadScript(src, async, elem, callback){
                console.log('loadScript called');
                // Loads a script.
                elem = elem || document.createElement('script');
                elem.async = elem.defer = async;
                elem.src = src;
                console.log('elem = ' + elem);                
                if(callback) {
                    if(elem.readyState) {
                        console.log('elem.readyState is true');
                        // IE 
                        elem.onreadystatechange = function() {
                            if(elem.readyState == "loaded" || elem.readyState == "complete") {
                                elem.onreadystatechange = null;
                                callback();
                            }
                        };
                    } else {
                        console.log('elem.readyState is false');
                        // Good browsers
                        elem.onload = function() {
                            console.log('elem.onload set');
                            callback();
                        }
                    }
                }
                insertScript(elem);
            }
            function insertScript(e) {
                console.log('insertScript(e) called');
                console.log('e = ' + e);
                document.getElementsByTagName('head')[0].appendChild(e);
            }
        </script>
        <script>
            var doNext = function() {
                console.log('doNext called');
                //Load common code that includes config, then load the app
                //logic for this page. Do the require calls here instead of
                //a separate file so after a build there are only 2 HTTP
                //requests instead of three.
                require(['./js/common'], function (common) {
                    console.log('page: common required');
                    console.log(common);
                    //js/common sets the baseUrl to be js/ so
                    //can just ask for 'app/main' here instead
                    //of 'js/app/main'
                    require(['app/main'], function (main) {
                         console.log('page: main required');
                         console.log(main);
                    });
                });
            };
        </script>
    </head>
    <body onload="loadScript('js/lib/require.js', true, null, doNext)">
        Hello World!
    </body>
</html>
